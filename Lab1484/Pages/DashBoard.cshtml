@page
@model Lab1484.Pages.DashBoardModel

@{
}
    <!doctype html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="YOUR DESCRIPTION HERE">
        <meta name="author" content="YOUR NAME HERE">
        <title>Test</title>

        <!-- LOAD BOOTSTRAP CSS - DO NOT DELETE -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <!-- END LOADING BOOTSTRAP CSS -->
        <!-- Custom styles -->
        <link href="style.css" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">

        <!-- Scripts -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <script src="https://kit.fontawesome.com/4ccc3672e0.js" crossorigin="anonymous"></script>
        <script src="script.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
        <script src="~/lib/jquery/dist/jquery.min.js"></script>
        <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    </head>

    <body>

        <main>

            <!-- set up container-->
            <div class="container-fluid">
                <div class="row flex-nowrap">
                    <!--set up main right side content-->
                    <div class="col py-3">
                        <h1>Home</h1>
                        <div class="row">

                            <!--donut chart column-->
                            <div class="col-5">
                                <canvas id="grantsChart"></canvas>
                            </div> <!--close donut chart column-->

                            <!--reminders column-->
                            <div class="col-4 border-light-subtle rounded">
                                <h4>Reminders</h4>
                                <ul class="list-group list-group-light">
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        <div class="d-flex align-items-center">
                                            <input class="form-check-input me-1" type="checkbox" value="" id="firstCheckbox">
                                            <div class="ms-3">
                                                <p class="fw-bold mb-1">Task</p>
                                                <p class="text-muted mb-0">Due 00/00/0000</p>
                                            </div>
                                        </div>
                                        <span class="badge rounded-pill text-bg-danger">Deadline</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        <div class="d-flex align-items-center">
                                            <input class="form-check-input me-1" type="checkbox" value="" id="firstCheckbox">
                                            <div class="ms-3">
                                                <p class="fw-bold mb-1">Task</p>
                                                <p class="text-muted mb-0">Due 00/00/0000</p>
                                            </div>
                                        </div>
                                        <span class="badge rounded-pill text-bg-primary">Meeting</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        <div class="d-flex align-items-center">
                                            <input class="form-check-input me-1" type="checkbox" value="" id="firstCheckbox">
                                            <div class="ms-3">
                                                <p class="fw-bold mb-1">Task</p>
                                                <p class="text-muted mb-0">Due 00/00/0000</p>
                                            </div>
                                        </div>
                                        <span class="badge rounded-pill text-bg-secondary">Task</span>
                                    </li>
                                </ul>
                            </div> <!--close reminders column-->
                            <!--grants-->
                            <div class="col-12">

                                <!--grant header (title, search, and create grant button-->
                                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 ">
                                    <h2>All Grants</h2>
                                    <div class="btn-toolbar mb-2 mb-md-0">
                                        <form class="d-flex" role="search">
                                            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                                            <button class="btn btn-outline-success me-2" type="submit">Search</button>
                                        </form>
                                        <button type="button" class="btn btn-outline-secondary me-2">
                                            <i class="fa-solid fa-filter"></i>
                                        </button>
                                        <!--create grant button trigger modal-->
                                        <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#creategrantModal">
                                            Create
                                            <i class="fa-solid fa-plus"></i>
                                        </button>

                                        <!--create grant modal -->
                                        <div class="modal fade" id="creategrantModal" tabindex="-1" aria-labelledby="creategrantModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h1 class="modal-title fs-5" id="creategrantModalLabel">Create New Grant</h1>
                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <form class="form-floating">
                                                            <div class="row mb-4">
                                                                <h6>Grant Information</h6>
                                                                <div class="col">
                                                                    <div class="form-floating">
                                                                        <input type="number" class="form-control" id="floatingID" placeholder="Grant ID">
                                                                        <label for="floatingID">Grant ID</label>
                                                                    </div>
                                                                </div>
                                                                <div class="col">
                                                                    <div class="form-floating">
                                                                        <input type="date" class="form-control" id="floatingDate" placeholder="Due Date">
                                                                        <label for="floatingDate">Due Date</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-floating mb-4">
                                                                <input type="text" class="form-control" id="floatingOrganization" placeholder="Funding Organization">
                                                                <label for="floatingOrganization">Email</label>
                                                            </div>
                                                            <hr>
                                                            <h6>Main Point of Contact</h6>
                                                            <div class="form-floating mb-4">
                                                                <input type="text" class="form-control" id="floatingMainContactName" placeholder="Name (First and Last)">
                                                                <label for="floatingMainContactName">Name (First & Last)</label>
                                                            </div>
                                                            <div class="form-floating mb-4">
                                                                <input type="email" class="form-control" id="floatingEmail" placeholder="john.doe@gmail.com">
                                                                <label for="floatingEmail">Email</label>
                                                            </div>
                                                            <hr>
                                                            <h6>Other Assignees</h6>
                                                            <div id="assigneeContainer">
                                                                <div class="assignee-section mb-3" id="assignee-1">
                                                                    <div class="form-floating mb-4">
                                                                        <input type="text" class="form-control" id="assigneeName-1" name="assigneeName[]" placeholder="Name (First and Last)">
                                                                        <label for="assigneeName-1">Name (First & Last)</label>
                                                                    </div>
                                                                    <div class="form-floating mb-4">
                                                                        <input type="email" class=form-control id="assigneeEmail-1" name="assigneeEmail[]" placeholder="Email">
                                                                        <label for="assigneeEmail-1">Email</label>
                                                                    </div>
                                                                    <button type="button" class="btn btn-sm btn-outline-danger remove-assignee-btn" onclick="removgorbereAssignee(this)">Remove Assignee</button>
                                                                    <button type="button" id="addAssigneeBtn" class="btn btn-sm btn-outline-secondary">Add Another Assignee</button>
                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div> <!--close modal body-->
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">Cancel</button>
                                                        <button type="button" class="btn btn-primary">Add Grant</button>
                                                    </div>
                                                </div> <!--close modal content-->
                                            </div> <!--close modal dialog-->
                                        </div> <!--close grant modal-->

                                    </div> <!--close btn-toolbar-->
                                </div> <!--close d-flex-->
                            </div> <!--close grant column-->

                            <!--grant table-->
                            <div class="table-responsive table-bordered rounded small">
                                <table id="grantTable" class="table align-middle mb-0 bg-white">
                                    <thead class="bg-light">
                                        <tr>
                                            <th>
                                                <button class="sort-button btn btn-sm fw-bold shadow-none">
                                                    Grant ID
                                                </button>
                                            </th>
                                            <th>
                                                <button class="sort-button btn btn-sm fw-bold">
                                                    Contact
                                                </button>
                                            </th>
                                            <th>
                                                <button class="sort-button btn btn-rounded btn-sm fw-bold">
                                                    Due date
                                                </button>
                                            </th>
                                            <th>
                                                <button class="sort-button btn btn-rounded btn-sm fw-bold">
                                                    Status
                                                </button>
                                            </th>
                                            <th>
                                                <button class="sort-button btn btn-rounded btn-sm fw-bold">
                                                    Funding organization
                                                </button>
                                            </th>
                                            <th class="fw-bold">
                                                <button class="btn btn-rounded btn-sm fw-bold">
                                                    <i class="fa-solid fa-edit"></i>
                                                    Edit
                                                </button>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var prod in Model.GrantList)
                                        {
                                            var statusClass = prod.grantStatus?.ToLower() switch
                                            {
                                                "in progress" => "badge bg-info text-dark",
                                                "opportunity" => "badge bg-primary",
                                                "pending" => "badge bg-warning text-dark",
                                                "approved" => "badge bg-success",
                                                "rejected" => "badge bg-danger",
                                                _ => "badge bg-secondary"
                                            };

                                        <tr>
                                            <td>@prod.GrantID</td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    @*<img src="https://mdbootstrap.com/img/new/avatars/8.jpg" alt="" style="width: 45px; height: 45px" class="rounded-circle">*@
                                                    <div class="ms-3">
                                                        <p class="fw-bold mb-1">@prod.facultyName</p>
                                                        <p class="text-muted mb-0">@prod.facultyEmail</p>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>@prod.dueDate.ToShortDateString()</td>
                                            <td><span class="@statusClass">@prod.grantStatus</span></td>
                                            <td>Orgnaization Name</td>
                                            <td>
                                                <a asp-page="/UpdateGrant" class="btn btn-link btn-rounded btn-sm fw-bold" data-mdb-ripple-color="dark">
                                                    <i class="fa-solid fa-pen-to-square"></i>
                                                </a>
                                            </td>
                                            
                                        </tr>
                                        }
                                    </tbody>
                                        
                                    
                                </table>
                            </div> <!--close table div-->
                        </div> <!--close grants col-->

                    </div> <!--close main content row-->
                </div> <!--close main content col-->

            </div> <!--close row-->
            </div> <!--close container-->
       






    @*<h1>Dashboard and Display</h1>
    <br />
    <h2>List of Currently Live Projects</h2>

    <!-- Updated to fix broken page when selected -->
    <form asp-page-handler="SingleSelect" method="post">
        <select asp-for="ProjectList" class="form-select">
            @foreach (var prod in Model.ProjectList)
            {
                <option value="@prod.ProjectID">@prod.ProjectName</option>
            }
        </select>
        <br />

    </form>
    <br />
    <h2>Project View</h2>
    <table class="table table-bordered table-responsive table-hover">
        <thead>
            <tr>
                <th>Project Name</th>
                <th>Date Due</th>
                <th>Primary Investigator</th>
                <th>Status</th>
                <th>Notes</th>
                <th>Edit</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var prod in Model.ProjectList)
            {
                <tr>
                    <td>@prod.ProjectName</td>
                    <td>@(prod.DateDue.HasValue ? prod.DateDue.Value.ToString("MM/dd/yyyy") : "")</td>
                    <td>@prod.AdminName</td>
                    <td>@prod.ProjectStatus</td>
                    <td>
                        <form asp-page="/ProjectNotes" method="post" style="display:inline;">
                            <input type="hidden" name="ProjectID" value="@prod.ProjectID" />
                            <button type="submit" class="btn btn-link">Notes</button>
                        </form>
                    </td>
                    <td>
                        <form asp-page="/UpdateProject" method="post" style="display:inline;">
                            <input type="hidden" name="ProjectID" value="@prod.ProjectID" />
                            <button type="submit" class="btn btn-link">Edit Project</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <div style="display: flex; align-items: center; gap: 10px;">
        <h2 style="margin-right: 10px;">Grant View</h2>
        <a class="btn btn-secondary" asp-area="" asp-page="/UpdateGrant">Update Grant</a>
        <a class="btn btn-primary" asp-area="" asp-page="/GrantCreation">Create Grant</a>
    </div>
    <table class="table table-bordered table-responsive table-hover">
        <thead>
            <tr>
                <th>Grant Name:</th>
                <th>Grant Amount:</th>
                <th>Due Date:</th>
                <th>Faculty Name:</th>
                <th>Grant Status:</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var prod in Model.GrantList)
            {
                var statusClass = prod.grantStatus?.ToLower() switch
                {
                    "in progress" => "badge bg-info text-dark",
                    "opportunity" => "badge bg-primary",
                    "pending" => "badge bg-warning text-dark",
                    "approved" => "badge bg-success",
                    "rejected" => "badge bg-danger",
                    _ => "badge bg-secondary"
                };

                <tr>
                    <td>@prod.businessName</td>
                    <td>@prod.amount</td>
                    <td>@prod.dueDate.ToShortDateString()</td>
                    <td>@prod.facultyName</td>
                    <td><span class="@statusClass">@prod.grantStatus</span></td>
                </tr>
            }
        </tbody>
    </table>
*@

        </main>

    </body>
    </html>
    
     

